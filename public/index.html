<Html>
  <script src="https://ajax.googleapis.com/ajax/libs/cesiumjs/1.78/Build/Cesium/Cesium.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- <script type="text/javascript" src="https://maps.googleapis.com/maps/api/geocode/json?address=delhi&key=AIzaSyD1V9-sB5DAZcGv6QBUCgVpH6pEH-adL5A"></script> -->
  <script type="text/javascript">
  
 
  </script>
    <style>
    .fstPage  {
        background-image:url("/Users/siddharthgauba/Downloads/SACRED.jpeg");
        /*background-color: lightgray;*/
        height: 800px;
        width:100%;
        background-size:fixed;
    }
    .centered {
        color:goldenrod;
  position: absolute;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
    }
  .lol{
    font-family: "Lucida Console", "Courier New", monospace
  }

</style>
<style>
  /* Always set the map height explicitly to define the size of the div
     * element that contains the map. */
#map {
height: 100%;
}

/* Optional: Makes the sample page fill the window. */
html,
body {
height: 100%;
margin: 0;
padding: 0;
}

input[type="text"] {
background-color: #fff;
border: 0;
border-radius: 2px;
box-shadow: 0 1px 4px -1px rgba(0, 0, 0, 0.3);
margin: 10px;
padding: 0 0.5em;
font: 400 18px Roboto, Arial, sans-serif;
overflow: hidden;
line-height: 40px;
margin-right: 0;
min-width: 25%;
}

input[type="button"] {
background-color: #fff;
border: 0;
border-radius: 2px;
box-shadow: 0 1px 4px -1px rgba(0, 0, 0, 0.3);
margin: 10px;
padding: 0 0.5em;
font: 400 18px Roboto, Arial, sans-serif;
overflow: hidden;
height: 40px;
cursor: pointer;
margin-left: 5px;
}
input[type="button"]:hover {
background: #ebebeb;
}
input[type="button"].button-primary {
background-color: #1a73e8;
color: white;
}
input[type="button"].button-primary:hover {
background-color: #1765cc;
}
input[type="button"].button-secondary {
background-color: white;
color: #1a73e8;
}
input[type="button"].button-secondary:hover {
background-color: #d2e3fc;
}

#response-container {
background-color: #fff;
border: 0;
border-radius: 2px;
box-shadow: 0 1px 4px -1px rgba(0, 0, 0, 0.3);
margin: 10px;
padding: 0 0.5em;
font: 400 18px Roboto, Arial, sans-serif;
overflow: hidden;
overflow: auto;
max-height: 50%;
max-width: 90%;
background-color: rgba(255, 255, 255, 0.95);
font-size: small;
}

#instructions {
background-color: #fff;
border: 0;
border-radius: 2px;
box-shadow: 0 1px 4px -1px rgba(0, 0, 0, 0.3);
margin: 10px;
padding: 0 0.5em;
font: 400 18px Roboto, Arial, sans-serif;
overflow: hidden;
padding: 1rem;
font-size: medium;
}
</style>
        <div class="fstPage">
            
        </div>
        <div class="centered"><h1>See What the Fututre Awaits!!</h1>
          <form  class="lol" action="/Users/siddharthgauba/Desktop/finalpage.html">
            <label for="fname">First Name:</label>
            <input type="text" id="fname" name="fname" style="background-color: black;color: white;"><p> </p>
            <label for="lname">Last Name:</label>
            <input type="text" id="lname" name="lname" style="background-color: black;color: white;"><br><br>
            <label for="lname">Date of Birth:</label>
            <input type="date" id="lname1" name="lname1"style="background-color: black;color: white;"><br><br>
            <label for="lname">Time of Birth:</label>
            <input type="time" id="lname2" name="lname2"style="background-color: black;color: white;"><br><br>
            <label for="lname">Place of Birth:</label>
            <input type="place" id="lname3" name="lname3"style="background-color: black;color: white;"><br><br>
            
            <input type="submit" value="Submit" id="submitbutton" style="background-color: black;color: white;" >
          
          </form></div>
          <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
           <div id="map"></div>
           <!--  -->
           <script
              src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&libraries=&v=weekly&channel=2"
              async
            ></script>
              <script >
                  var myData
                  var localStorage
                  var lat
                  var lng

                  function myFunction() {
                    var first_name=document.getElementById('fname').value.concat(document.getElementById('lname').value)
                    var date=document.getElementById('lname1').value
                    var time= document.getElementById('lname2').value
                    var location= document.getElementById('lname3').value
                    var time1 = new Date(time)
                    console.log(time)
                    var date1= new Date(date)
                    var month= date1.getUTCMonth() + 1
                    var day= date1.getUTCDate()
                    var year = date1.getUTCFullYear()
                    var geocoder =  new google.maps.Geocoder();
                  geocoder.geocode( { 'address': location}, function(results, status) {
                          if (status == google.maps.GeocoderStatus.OK) {
                            lat=results[0].geometry.location.lat() 
                            lng=results[0].geometry.location.lng()
                            console.log('working3')
                            console.log(lat)
                          } 
                          else {
                            
                          }})
                    
                  console.log('working2')
                  console.log(lat)
                            
                 var first='{'
                 var last='}'
                 var dict=  {"day":String(day) , "month": String(month),  "year": String(year),  "hour": "2","min": "30", "name": String(first_name) ,  "lat": String(lat),  "lon": String(lng),  "tzone": "5.5"}
                 const array3 = first.concat(dict);
                 console.log('working')
                 
                 array4=JSON.stringify(dict);
                 console.log(array4)
                 const settings = {
                  "async": true,
                  "crossDomain": true,
                  "url": "https://vedicrishi-horoscope-matching-v1.p.rapidapi.com/numero_table/",
                  "method": "POST",
                  "headers": {
                    "content-type": "application/json",
                    "x-rapidapi-host": "vedicrishi-horoscope-matching-v1.p.rapidapi.com",
                    "x-rapidapi-key": "38a7a781a1mshb83548f54a43b47p121131jsnd88cc15b2588"
                  },
                  "processData": false,
                  "data": array4
                };
                  
                  $.ajax(settings).done(function (response) {
                    myData=JSON.stringify(response)
                    localStorage.setItem('objectToPass',myData );
                   alert(response.value)

                  window.location.href="finalpage.html";
});
                  }
                  
                  document.getElementById("submitbutton").addEventListener("click", function(event){
                    
                   // var myData = localStorage['objectToPass'];
                    
                    //localStorage.removeItem( 'objectToPass' );
                    //window.location.href = "/Users/siddharthgauba/Downloads/finalpage.html";
    event.preventDefault();
    console.log('submit')
    myFunction()
});
                  
              </script>
</Html>